use master
go
create database QUANLYBANHANG
go
use QUANLYBANHANG
set dateformat dmy

create table KHACHHANG
(
	MaKhachHang varchar(10)	primary key,
	HoTen nvarchar(50),
	GioiTinh nvarchar(3),
	DiaChi nvarchar(100),
	SoDienThoai varchar(20),
	Email varchar(40)
)

create table NHACUNGCAP
(
	MaNhaCungCap varchar(10) primary key,
	TenNhaCungCap nvarchar(50),
	DiaChi nvarchar(100),
	SoDienThoai varchar(20),
	Email varchar(40)
)

create table LOAISANPHAM
(
	MaLoai varchar(10) primary key,
	TenLoai nvarchar(20),
	GhiChu nvarchar(100)
)

create table SANPHAM
(
	MaSanPham varchar(10) primary key,
	TenSanPham nvarchar(30),
	GiaNhap money,
	GiaBan money,
	MaLoai varchar(10) foreign key references LOAISANPHAM(MaLoai),
	TonKho int,
	MoTa nvarchar(40),
	DonVi nvarchar(10),
	VAT decimal,
	Chietkhau decimal
)

create table DACQUYEN
(
	MaDacQuyen varchar(10) primary key,
	TenDacQuyen nvarchar(20)
)

create table NGUOIDUNG
(
	MaNguoidung varchar(10) primary key,
	TenDangNhap varchar(20),
	MatKhau varchar(20),
	HoTen nvarchar(40),
	GioiTinh nvarchar(3),
	MaDacQuyen varchar(10) foreign key references DACQUYEN(MaDacQuyen),
	NgaySinh smalldatetime,
	SoDienThoai varchar(20),
	Email varchar(20)
)

create table BAOGIA
(
	MaBaoGia varchar(10) primary key,
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayLap smalldatetime,
	GhiChu nvarchar(40)
)

create table CTBAOGIA
(
	MaBaoGia varchar(10) foreign key references BAOGIA(MaBaoGia),
	MaSanPham varchar(10) foreign key references SANPHAM(MaSanPham),
	GiaBan money,
	GhiChu nvarchar(40)
	constraint PK_CTBAOGIA primary key (MaBaoGia,MaSanPham)
)

create table PHIEUTHU
(
	MaPhieu varchar(10) primary key,
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayLap smalldatetime,
	TenNguoiNop nvarchar(50),
	SoTien money,
	LyDo nvarchar(40)
)

create table PHIEUCHI
(
	MaPhieu varchar(10) primary key,
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayLap smalldatetime,
	TenNguoiNhan nvarchar(50),
	SoTien money,
	LyDo nvarchar(40)
)

create table PHIEUNHAP
(
	MaPhieu varchar(10) primary key,
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	MaNhaCungCap varchar(10) foreign key references NHACUNGCAP(MaNhaCungCap),
	NgayLap smalldatetime,
	LoaiPhieu nvarchar(30),
	TongTien money,
	GhiChu nvarchar(40)
)

create table CTPHIEUNHAP
(
	MaPhieu varchar(10) foreign key references PHIEUNHAP(MaPhieu),
	MaSanPham varchar(10) foreign key references SANPHAM(MaSanPham),
	SoLuong int,
	GhiChu nvarchar(40)
	constraint PK_CTPHIEUNHAP primary key (MaPhieu,MaSanPham)
)

create table PHIEUXUAT
(
	MaPhieu varchar(10) primary key,
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayLap smalldatetime,
	TongTien money,
	GhiChu nvarchar(40)
)

create table CTPHIEUXUAT
(
	MaPhieu varchar(10) foreign key references PHIEUXUAT(MaPhieu),
	MaSanPham varchar(10) foreign key references SANPHAM(MaSanPham),
	SoLuong int,
	GhiChu nvarchar(40)
	constraint PK_CTPHIEUXUAT primary key (MaPhieu,MaSanPham)
)

create table HOADONBANHANG
(
	MaHoaDon varchar(10) primary key,
	MaKhachHang varchar(10) foreign key references KHACHHANG(MaKhachHang),
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayLap smalldatetime,
	TongTien money,
	ThanhTien money,
	DaThu int,
	GhiChu nvarchar(40)
)

create table CTHOADONBANHANG
(
	MaHoaDon varchar(10) foreign key references HOADONBANHANG(MaHoaDon),
	MaSanPham varchar(10) foreign key references SANPHAM(MaSanPham),
	SoLuong int,
	constraint PK_CTHOADONBANHANG primary key (MaHoaDon,MaSanPham)
)

create table HOADONDATHANG
(
	MaHoaDon varchar(10) primary key,
	MaKhachHang varchar(10) foreign key references KHACHHANG(MaKhachHang),
	MaNhanVien varchar(10) foreign key references NGUOIDUNG(MaNguoiDung),
	NgayDuKienGiao smalldatetime,
	NgayLap smalldatetime,
	TongTien money,
	ThanhTien money,
	DaGiao int,
	GhiChu nvarchar(100)
)

create table CTHOADONDATHANG
(
	MaHoaDon varchar(10) foreign key references HOADONDATHANG(MaHoaDon),
	MaSanPham varchar(10) foreign key references SANPHAM(MaSanPham),
	SoLuong int,
	constraint PK_CTHOADONDATHANG primary key (MaHoaDon,MaSanPham)
)

create table SAOLUUPHUCHOI
(
	MaSaoLuu varchar(10) primary key,
	DuongDan nvarchar(200),
	NgayThucHien smalldatetime,
	NoiDung nvarchar(100)
)


---LOAISANPHAM
INSERT INTO LOAISANPHAM VALUES('LS000000',N'Bột giặt','')
INSERT INTO LOAISANPHAM VALUES('LS000001',N'Mì tôm','')
INSERT INTO LOAISANPHAM VALUES('LS000002',N'Dầu gội','')
INSERT INTO LOAISANPHAM VALUES('LS000003',N'Trà','')
INSERT INTO LOAISANPHAM VALUES('LS000004',N'Nước ngọt','')
INSERT INTO LOAISANPHAM VALUES('LS000005',N'Sữa','')
INSERT INTO LOAISANPHAM VALUES('LS000006',N'Bút','')
INSERT INTO LOAISANPHAM VALUES('LS000007',N'Vở','')
INSERT INTO LOAISANPHAM VALUES('LS000008',N'Snack','')
INSERT INTO LOAISANPHAM VALUES('LS000009',N'Truyện tranh','')
---NHACUNGCAP
INSERT INTO NHACUNGCAP VALUES('NC000000',N'Công ty Thanh Hải',N'258 Thành Thái, Q10, TPHCM','08543336','thanhhaicp@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NC000001',N'Công ty Bảo Long',N'12 Đô Lương, Đống Đa, HN','045955663','baolongcute@outlook.com')
INSERT INTO NHACUNGCAP VALUES('NC000002',N'Tập đoàn Hòa Phát',N'147B Nguyễn Văn Cừ, Châu Thành, Tiền Giang','012125988565','hphplmt@hoaphat.com')
INSERT INTO NHACUNGCAP VALUES('NC000003',N'Tập đoàn Hoàng Anh',N'85A Trương Định, Q1, TPHCM','04589885','hoanganh.cty@gmail.com')
INSERT INTO NHACUNGCAP VALUES('NC000004',N'Nhà máy ACS',N'1456 Võ Thị Sáu, Q1, TPHCM','085565544','acs.acc@gmail.com')
---KHACHHANG
INSERT INTO KHACHHANG VALUES('KH000000',N'Nguyễn Thị Ngọc Trinh',N'Nữ',N'130 Trần Quang Khải, P. Tân Định, Q.1, TP.HCM','01212558955','trinh@gmail.com')
INSERT INTO KHACHHANG VALUES('KH000001',N'Lê Thị Huyền Anh',N'Nữ',N'229 Nguyễn Thị Tú, P.Bình Hưng Hòa B, Q.Bình Tân, TP.HCM','0155322252','anh@gm.vn')
INSERT INTO KHACHHANG VALUES('KH000002',N'Trần Đức Việt',N'Nam',N'198 Trần Não, Ấp Bình Khánh 2, P. Bình An, Quận 2, TP. Hồ Chí Minh','0565223232','tamfdf@gm.com.vn')
INSERT INTO KHACHHANG VALUES('KH000003',N'Thái Thùy Linh',N'Nữ',N'190B Nguyễn Thị Định, P.An Phú, Quận 2, TP.Hồ Chí Minh','032323','nam@hth.com')
INSERT INTO KHACHHANG VALUES('KH000004',N'Nguyễn Văn Nam',N'Nam',N'190B Nguyễn Thị Định, P.An Phú, Quận 2, TP.Hồ Chí Minh','032356232','chauhy@gm.com.vn')
INSERT INTO KHACHHANG VALUES('KH000005',N'Trương Vô Kỵ',N'Nam',N'127-129 Nguyễn Văn Cừ, TT.Gia Bình, H.Gia Bình, T.Bắc Ninh','03232320','kyvo@uit.vn')
INSERT INTO KHACHHANG VALUES('KH000006',N'Hồ Thanh Thúy',N'Nữ',N'325 Điện Biên Phủ, P. Hòa Khê, Q. Thanh Khê, TP Đà Nẵng','0326230','chautrinh@gh.com')
INSERT INTO KHACHHANG VALUES('KH000007',N'Nguyễn Cao Kỳ Duyên',N'Nữ',N'320-322 Lê Duẩn,P. Tân Chính, Q.Thanh Khê, Đà Nẵng','026565','duyen@th.vn')
INSERT INTO KHACHHANG VALUES('KH000008',N'Phạm Thị Hương',N'Nữ',N'Ấp Nội Ô, TT. Ngan Dừa, H. Hồng Dân, T. Bạc Liêu','01656565262','huong@ff.vn')
INSERT INTO KHACHHANG VALUES('KH000009',N'Trần Ngọc Lan Khuê',N'Nữ',N'C1B, đường Trần Phú, P.3, TP.Bạc Liêu, Bạc Liêu','026565655','khue@hh.vn')
---DACQUYEN
INSERT INTO DACQUYEN VALUES('DQ001',N'Quản trị viên')
INSERT INTO DACQUYEN VALUES('DQ002',N'Nhân viên')
---NGUOIDUNG
INSERT INTO NGUOIDUNG VALUES('ND000000','admin','123321',N'Administrator',N'Nam','DQ001','02/11/1980','19001080','admin@tmt.com')
INSERT INTO NGUOIDUNG VALUES('ND000001','tuannlh','123456',N'Nguyễn Lê Hoàng Tuấn',N'Nam','DQ001','01/01/1996','0123356555','tuannlh@tmt.com')
INSERT INTO NGUOIDUNG VALUES('ND000002','phungnlg','123456',N'Nguyễn Lê Gia Phụng',N'Nam','DQ001','23/09/1996','0123355569','phungnlg@tmt.com')
INSERT INTO NGUOIDUNG VALUES('ND000003','congtm','123456',N'Trần Minh Công',N'Nam','DQ001','02/01/1996','0123354583','congtm@tmt.com')
INSERT INTO NGUOIDUNG VALUES('ND000004','thult','123456',N'Lê Thị Thư',N'Nữ','DQ002','12/02/1990','0123353597','thult@tmt.com')
INSERT INTO NGUOIDUNG VALUES('ND000005','thanhtn','123456',N'Trần Nam Thành',N'Nam','DQ002','13/05/1990','0123352611','thanhtn@tmt.com')
---BAOGIA
INSERT INTO BAOGIA VALUES('BG000000','ND000001','25/06/2016','')
INSERT INTO BAOGIA VALUES('BG000001','ND000002','24/06/2016','')
INSERT INTO BAOGIA VALUES('BG000002','ND000003','25/05/2015','')
---SANPHAM
INSERT INTO SANPHAM VALUES('SP000000',N'Bột giặt OMO',17000,18000,'LS000000',50,N'Sản phẩm',N'Túi',10,5)
INSERT INTO SANPHAM VALUES('SP000001',N'Mì Hảo Hảo',19000,20000,'LS000001',60,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000002',N'DG Clear',16500,17500,'LS000002',55,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000003',N'Trà Atiso',45000,46000,'LS000003',15,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000004',N'Pepsi',9000,10000,'LS000004',36,N'Sản phẩm',N'Hộp',10,5)
INSERT INTO SANPHAM VALUES('SP000005',N'Sữa Vina',70000,71000,'LS000005',25,N'Sản phẩm',N'Hộp',10,5)
INSERT INTO SANPHAM VALUES('SP000006',N'Bút bi Thiên Long',2000,3000,'LS000006',4,N'Sản phẩm',N'Cái',10,5)
INSERT INTO SANPHAM VALUES('SP000007',N'Vở Hòa Bình',6000,7000,'LS000007',55,N'Sản phẩm',N'Quyển',10,5)
INSERT INTO SANPHAM VALUES('SP000008',N'Snack Bắp',7000,8000,'LS000008',63,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000009',N'Conan',17000,18000,'LS000009',99,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000010',N'BG Tide',45000,46000,'LS000000',5,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000011',N'Mì Lẩu Thái',5500,6500,'LS000001',6,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000012',N'DG Dove',150000,151000,'LS000002',55,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000013',N'Trà Lipton',62000,63000,'LS000003',44,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000014',N'Coca',90000,91000,'LS000004',22,N'Sản phẩm',N'Chai',10,5)
INSERT INTO SANPHAM VALUES('SP000015',N'Sữa TH',5000,6000,'LS000005',77,N'Sản phẩm',N'Chai',10,5)
INSERT INTO SANPHAM VALUES('SP000016',N'Bút chì',2500,3500,'LS000006',88,N'Sản phẩm',N'Cái',10,5)
INSERT INTO SANPHAM VALUES('SP000017',N'Vở Thu Thu',3600,4600,'LS000007',63,N'Sản phẩm',N'Quyển',10,5)
INSERT INTO SANPHAM VALUES('SP000018',N'Snack Chuối',8000,9000,'LS000008',33,N'Sản phẩm',N'Gói',10,5)
INSERT INTO SANPHAM VALUES('SP000019',N'Hậu duệ mặt trời',145000,146000,'LS000009',25,N'Sản phẩm',N'Quyển',10,5)
---CTBAOGIA
INSERT INTO CTBAOGIA VALUES('BG000000','SP000000',15000,'')
INSERT INTO CTBAOGIA VALUES('BG000000','SP000001',17000,'')
INSERT INTO CTBAOGIA VALUES('BG000000','SP000002',32000,'')
INSERT INTO CTBAOGIA VALUES('BG000001','SP000003',45000,'')
INSERT INTO CTBAOGIA VALUES('BG000001','SP000004',48500,'')
INSERT INTO CTBAOGIA VALUES('BG000001','SP000005',178000,'')
INSERT INTO CTBAOGIA VALUES('BG000002','SP000006',236000,'')
INSERT INTO CTBAOGIA VALUES('BG000002','SP000007',14500,'')
INSERT INTO CTBAOGIA VALUES('BG000002','SP000008',142000,'')
---PHIEUCHI
INSERT INTO PHIEUCHI VALUES('PC000001','ND000000','22/06/2016',N'Nguyễn Thị Nhân',150000000,N'')
INSERT INTO PHIEUCHI VALUES('PC000002','ND000001','25/05/2016',N'Nguyễn Tấn Dũng',20000000,N'')
INSERT INTO PHIEUCHI VALUES('PC000003','ND000002','22/10/2015',N'Nguyễn Thị Kim',15000000,N'')
---PHIEUTHU
INSERT INTO PHIEUTHU VALUES('PT000001','ND000000','22/10/2016',N'Nguyễn Thị Nhân Hậu',250000000,'')
INSERT INTO PHIEUTHU VALUES('PT000002','ND000001','15/02/2016',N'Nguyễn Tấn Dũng',150000000,'')
INSERT INTO PHIEUTHU VALUES('PT000003','ND000002','17/07/2015',N'Nguyễn Thị Kim Ngân',150000000,'')
---PHIEUXUAT
INSERT INTO PHIEUXUAT VALUES('PX000001','ND000001','12/12/2015',50000000,'')
INSERT INTO PHIEUXUAT VALUES('PX000002','ND000002','22/02/2016',50000000,'')
--CTPHIEUXUAT
INSERT INTO CTPHIEUXUAT VALUES('PX000001','SP000000',20,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000001','SP000001',22,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000001','SP000002',24,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000001','SP000003',26,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000001','SP000004',28,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000002','SP000005',30,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000002','SP000006',32,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000002','SP000007',34,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000002','SP000008',36,'')
INSERT INTO CTPHIEUXUAT VALUES('PX000002','SP000009',38,'')
---PHIEUNHAP
INSERT INTO PHIEUNHAP VALUES('PN000001','ND000001','NC000001','12/12/2015',N'Nhập hàng',10000000,'')
INSERT INTO PHIEUNHAP VALUES('PN000002','ND000002','NC000002','13/12/2015',N'Điều chỉnh',15000000,'')
---CTPHIEUNHAP
INSERT INTO CTPHIEUNHAP VALUES('PN000001','SP000000',20,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000001','SP000001',22,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000001','SP000002',24,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000001','SP000003',26,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000001','SP000004',28,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000002','SP000005',30,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000002','SP000006',32,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000002','SP000007',34,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000002','SP000008',36,'')
INSERT INTO CTPHIEUNHAP VALUES('PN000002','SP000009',38,'')
---HOADONDATHANG
INSERT INTO HOADONDATHANG VALUES('DH000001','KH000001','ND000000','22/06/2016','20/06/2016',150000,165000,1,'')
INSERT INTO HOADONDATHANG VALUES('DH000002','KH000002','ND000001','23/06/2016','22/06/2016',260000,286000,0,'')
INSERT INTO HOADONDATHANG VALUES('DH000003','KH000003','ND000000','25/06/2016','22/06/2016',370000,407000,1,'')
INSERT INTO HOADONDATHANG VALUES('DH000004','KH000004','ND000001','28/06/2016','23/06/2016',480000,528000,0,'')
INSERT INTO HOADONDATHANG VALUES('DH000005','KH000005','ND000002','26/06/2016','21/06/2016',590000,649000,1,'')
---CTHOADONDATHANG
INSERT INTO CTHOADONDATHANG VALUES('DH000001','SP000000',12)
INSERT INTO CTHOADONDATHANG VALUES('DH000002','SP000001',15)
INSERT INTO CTHOADONDATHANG VALUES('DH000003','SP000002',18)
INSERT INTO CTHOADONDATHANG VALUES('DH000004','SP000003',21)
INSERT INTO CTHOADONDATHANG VALUES('DH000005','SP000004',24)
INSERT INTO CTHOADONDATHANG VALUES('DH000001','SP000005',27)
INSERT INTO CTHOADONDATHANG VALUES('DH000002','SP000006',30)
INSERT INTO CTHOADONDATHANG VALUES('DH000003','SP000007',33)
INSERT INTO CTHOADONDATHANG VALUES('DH000004','SP000008',12)
INSERT INTO CTHOADONDATHANG VALUES('DH000005','SP000009',15)
INSERT INTO CTHOADONDATHANG VALUES('DH000001','SP000010',18)
INSERT INTO CTHOADONDATHANG VALUES('DH000002','SP000011',21)
INSERT INTO CTHOADONDATHANG VALUES('DH000003','SP000012',24)
INSERT INTO CTHOADONDATHANG VALUES('DH000004','SP000013',27)
INSERT INTO CTHOADONDATHANG VALUES('DH000005','SP000014',30)
---HOADONBANHANG
INSERT INTO HOADONBANHANG VALUES('BH000001','KH000001','ND000000','20/06/2016',140000,154000,1,'')
INSERT INTO HOADONBANHANG VALUES('BH000002','KH000002','ND000001','21/06/2016',260000,286000,0,'')
INSERT INTO HOADONBANHANG VALUES('BH000003','KH000003','ND000000','22/06/2016',380000,418000,1,'')
INSERT INTO HOADONBANHANG VALUES('BH000004','KH000004','ND000001','23/06/2016',500000,550000,0,'')
INSERT INTO HOADONBANHANG VALUES('BH000005','KH000005','ND000002','25/06/2016',620000,682000,1,'')
---CTHOADONBANHANG
INSERT INTO CTHOADONBANHANG VALUES('BH000001','SP000000',12)
INSERT INTO CTHOADONBANHANG VALUES('BH000002','SP000001',18)
INSERT INTO CTHOADONBANHANG VALUES('BH000003','SP000002',24)
INSERT INTO CTHOADONBANHANG VALUES('BH000004','SP000003',30)
INSERT INTO CTHOADONBANHANG VALUES('BH000005','SP000004',36)
INSERT INTO CTHOADONBANHANG VALUES('BH000001','SP000005',42)
INSERT INTO CTHOADONBANHANG VALUES('BH000002','SP000006',48)
INSERT INTO CTHOADONBANHANG VALUES('BH000003','SP000007',54)
INSERT INTO CTHOADONBANHANG VALUES('BH000004','SP000008',60)
INSERT INTO CTHOADONBANHANG VALUES('BH000005','SP000009',12)
INSERT INTO CTHOADONBANHANG VALUES('BH000001','SP000010',18)
INSERT INTO CTHOADONBANHANG VALUES('BH000002','SP000011',24)
INSERT INTO CTHOADONBANHANG VALUES('BH000003','SP000012',30)
INSERT INTO CTHOADONBANHANG VALUES('BH000004','SP000013',36)
INSERT INTO CTHOADONBANHANG VALUES('BH000005','SP000014',42)